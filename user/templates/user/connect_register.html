{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenue au Cameroun | Connexion & Inscription</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'user/css/style.css' %}">
</head>
<body>
    <div class="main-container" id="mainContainer">

        <div class="image-section" id="imageSection">
            <img id="dynamicImage" src="https://i.pinimg.com/736x/0e/92/a3/0e92a37772f91de30a3d6bb8cc4698dd.jpg" alt="Image de fond">
            <div class="overlay-text">
                <h2 id="dynamicTitle">Bienvenue !</h2>
                <p id="dynamicText">Connectez-vous pour accéder à votre compte.</p>
            </div>
        </div>

        <div class="form-container" id="formContainer">
            <div class="form-wrapper" id="formWrapper">

                <div class="form-box login">
                    <h2>Connexion</h2>
                    <form action="{% url 'profil_user' %}" method="post" id="loginForm">
                        {% csrf_token %}
                        <div class="input-group">
                            <span class="icon"><i class="fas fa-user"></i></span>
                            <input type="text" id="login-username" name="username" placeholder="Nom d'utilisateur" required>
                        </div>
                        <div class="input-group">
                            <span class="icon"><i class="fas fa-lock"></i></span>
                            <input type="password" id="login-password" name="password" placeholder="Mot de passe" required>
                        </div>
                        <button type="submit">Se connecter</button>
                        <p class="switch-form-text">Pas encore de compte ? <a href="#" id="showRegister">S'inscrire</a></p>
                    </form>
                </div>

                <div class="form-box register">
                    <h2>Inscription</h2>
                    <div id="registerFormErrors" class="form-errors" style="display:none;"></div>
                    <form action="#" method="post" id="registerForm" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="form-row">
                            <div class="input-group">
                                <span class="icon"><i class="fas fa-user"></i></span>
                                <input type="text" name="first_name" placeholder="Prénom" required>
                                <ul class="field-errors" id="first_name_errors"></ul>
                            </div>
                            <div class="input-group">
                                <span class="icon"><i class="fas fa-user"></i></span>
                                <input type="text" name="last_name" placeholder="Nom" required>
                                <ul class="field-errors" id="last_name_errors"></ul>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="input-group">
                                <span class="icon"><i class="fas fa-user-alt"></i></span>
                                <input type="text" name="username" placeholder="Nom d'utilisateur" required>
                                <ul class="field-errors" id="username_errors"></ul>
                            </div>
                            <div class="input-group">
                                <span class="icon"><i class="fas fa-envelope"></i></span>
                                <input type="email" name="email" placeholder="Email (optionnel)">
                                <ul class="field-errors" id="email_errors"></ul>
                            </div>
                        </div>

                        <div class="input-group full-width">
                            <span class="icon"><i class="fas fa-phone-alt"></i></span>
                            <input type="tel" name="phone_number" placeholder="Numéro de téléphone (ex: 6XXXXXXXX)" required>
                            <ul class="field-errors" id="phone_number_errors"></ul>
                        </div>

                        <div class="form-row">
                            <div class="input-group">
                                <span class="icon"><i class="fas fa-map-marker-alt"></i></span>
                                <select name="region_of_origin" id="regionSelect" required>
                                    <option value="">Chargement des régions...</option>
                                </select>
                                <ul class="field-errors" id="region_of_origin_errors"></ul>
                            </div>
                            <div class="input-group">
                                <span class="icon"><i class="fas fa-city"></i></span>
                                <select name="department_of_origin" id="departmentSelect" required disabled>
                                    <option value="">Sélectionnez votre Département</option>
                                </select>
                                <ul class="field-errors" id="department_of_origin_errors"></ul>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="input-group">
                                <span class="icon"><i class="fas fa-lock"></i></span>
                                <input type="password" name="password" placeholder="Mot de passe" required>
                                <ul class="field-errors" id="password_errors"></ul>
                            </div>
                            <div class="input-group">
                                <span class="icon"><i class="fas fa-lock"></i></span>
                                <input type="password" name="password2" placeholder="Confirmer le mot de passe" required>
                                <ul class="field-errors" id="password2_errors"></ul>
                            </div>
                        </div>
                        <button type="submit">S'inscrire</button>
                        <p class="switch-form-text">Vous avez déjà un compte ? <a href="#" id="showLogin">Se connecter</a></p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="api-endpoints"
         data-regions-url="{% url 'api_regions' %}"
         data-departments-url="{% url 'api_departments_by_region' %}"
         style="display:none;"></div>

    <script src="{% static 'user/js/script.js' %}"></script>

</body>
</html>